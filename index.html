<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Templeton Swerve Trainer (MAXSwerve Accurate)</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="wrap">
  <header>
    <h1>Templeton Swerve Trainer — MAXSwerve</h1>
    <label class="k">Motor</label>
    <select id="motorSel">
      <option value="NEO">NEO V1.1</option>
      <option value="VORTEX">NEO Vortex</option>
    </select>
    <label class="k">Drive Ratio</label>
    <select id="ratioSel"></select>
    <label class="k">Profile</label>
    <select id="profileSel"></select>
    <button id="calBtn">Calibrate</button>
    <button id="defBtn">Defender: Off</button>
    <button id="recBtn">Record Ghost</button>
    <button id="playBtn">Play Ghost</button>
    <span style="margin-left:auto;opacity:.7">LS=move, RS-X=rotate, <span class="k">Y</span> mode, <span class="k">A</span> reset</span>
  </header>
  <canvas id="c" width="1280" height="720"></canvas>
</div>

<div id="hud">
  <div><b>Mode</b>: <span id="mode">Field-centric</span></div>
  <div>Cycle: <span id="cycle">0.00s</span> | Pickups: <span id="pickups">0</span></div>
  <div>Free Speed: <span id="freeV">0.0</span> m/s | <span id="freeW">0.0</span> rad/s azimuth</div>
  <div>Speed: <span id="spd">0.0</span> m/s | Omega: <span id="om">0.0</span> rad/s</div>
</div>

<div id="calPanel">
  <h3>Quick Calibrate</h3>
  <p style="opacity:.8; font-size:12px; line-height:1.2">Enter simple field tests to auto-tune. Leave blank to skip a metric.</p>
  <label>Top-speed 5 m sprint (seconds)</label>
  <input id="calSprint" placeholder="e.g., 1.10" type="number" step="0.01" />
  <label>Full 360° in-place spin (seconds)</label>
  <input id="calSpin" placeholder="e.g., 0.85" type="number" step="0.01" />
  <label>Stopping distance from 3 m/s (meters)</label>
  <input id="calStop" placeholder="e.g., 1.8" type="number" step="0.01" />
  <div class="row" style="margin-top:10px">
    <div><button id="applyCal">Apply</button></div>
    <div><button id="closeCal">Close</button></div>
  </div>
</div>

<div id="toast"></div>

<script id="gearChart" type="application/json">{
  "5.50": {"NEO": 4.12, "VORTEX": 4.92, "name": "Base Low (5.50:1)"},
  "5.08": {"NEO": 4.46, "VORTEX": 5.33, "name": "Base Medium (5.08:1)"},
  "4.71": {"NEO": 4.80, "VORTEX": 5.74, "name": "Base High (4.71:1)"},
  "4.50": {"NEO": 5.03, "VORTEX": 6.01, "name": "X-High 1 (4.50:1)"},
  "4.29": {"NEO": 5.28, "VORTEX": 6.32, "name": "X-High 2 (4.29:1)"},
  "4.00": {"NEO": 5.66, "VORTEX": 6.77, "name": "X-High 3 (4.00:1)"},
  "3.75": {"NEO": 6.04, "VORTEX": 7.22, "name": "X-High 4 (3.75:1)"},
  "3.56": {"NEO": 6.36, "VORTEX": 7.60, "name": "X-High 5 (3.56:1)"}
}</script>

<script id="profiles" type="application/json">{
  "Templeton-Base": {
    "name": "Templeton-Base",
    "wheel_diam_m": 0.0762,
    "track_m": 0.60,
    "wheelbase_m": 0.60,
    "mass_kg": 47.0,
    "mu": 1.20,
    "latency_ms": 100,
    "jitter_ms": 20,
    "deadband": 0.08,
    "efficiency": 0.90
  }
}</script>

<script src="app.js" defer></script>
</body>
</html>
